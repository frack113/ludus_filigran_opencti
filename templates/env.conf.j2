REDIS_TAG=7.4.2
ELASTIC_TAG=8.17.4
MINIO_TAG=RELEASE.2024-05-28T17-19-04Z # Use "minio/minio:RELEASE.2024-05-28T17-19-04Z-cpuv1" to troubleshoot compatibility issues with CPU
RABBITMQ_TAG=4.0-management
POSTGRES_TAG=17-alpine

OPENCTI_TAG={{ ludus_filigran_opencti_version }}
OPENBAS_TAG={{ ludus_filigran_openbas_version }}

SERVER_IP={{ hostvars[inventory_hostname]['ansible_default_ipv4']['address'] }}

# OpenCTI
OPENCTI_ADMIN_EMAIL={{ ludus_filigran_opencti_ADMIN_EMAIL }}
OPENCTI_ADMIN_PASSWORD={{ ludus_filigran_opencti_ADMIN_PASSWORD }}
OPENCTI_ADMIN_TOKEN={{ ludus_filigran_opencti_ADMIN_TOKEN }}
OPENCTI_BASE_URL=http://{{ hostvars[inventory_hostname]['ansible_default_ipv4']['address'] }}:8080
OPENCTI_HEALTHCHECK_ACCESS_KEY={{ ludus_filigran_opencti_HEALTHCHECK_ACCESS_KEY }}
CONNECTOR_HISTORY_ID=ccd3ca0b-2fe9-4bb0-99c6-fea3aad66e78
CONNECTOR_ANALYSIS_ID=78a16f18-c4d2-4f4c-b4e3-1621b1329af4
MINIO_ROOT_USER={{ ludus_filigran_opencti_MINIO_ROOT_USER }}
MINIO_ROOT_PASSWORD={{ ludus_filigran_opencti_MINIO_ROOT_PASSWORD }}
RABBITMQ_DEFAULT_USER={{ ludus_filigran_opencti_RABBITMQ_DEFAULT_USER }}
RABBITMQ_DEFAULT_PASS={{ ludus_filigran_opencti_RABBITMQ_DEFAULT_PASS }}
ELASTIC_MEMORY_SIZE={{ ludus_filigran_opencti_ELASTIC_MEMORY_SIZE }}
SMTP_HOSTNAME={{ ludus_filigran_opencti_SMTP_HOSTNAME }}
XTM__OPENBAS_URL=http://{{ hostvars[inventory_hostname]['ansible_default_ipv4']['address'] }}:8081


# OpenBAS
POSTGRES_USER={{ ludus_filigran_opencti_POSTGRES_USER }}
POSTGRES_PASSWORD={{ ludus_filigran_opencti_POSTGRES_PASSWORD }}

# OpenBAS General Configuration
OPENBAS_BASE_URL=http://{{ hostvars[inventory_hostname]['ansible_default_ipv4']['address'] }}:8081
OPENBAS_ADMIN_EMAIL={{ ludus_filigran_opencti_OPENBAS_ADMIN_EMAIL }}
OPENBAS_ADMIN_PASSWORD={{ ludus_filigran_opencti_OPENBAS_ADMIN_PASSWORD }}
OPENBAS_ADMIN_TOKEN={{ ludus_filigran_opencti_OPENBAS_ADMIN_TOKEN }} # [MANDATORY] Replace with a valid UUIDv4
OPENBAS_HEALTHCHECK_KEY={{ ludus_filigran_opencti_OPENBAS_HEALTHCHECK_KEY}}
OPENBAS_XTM_OPENCTI_URL=http://{{ hostvars[inventory_hostname]['ansible_default_ipv4']['address'] }}:8080

# Spring Mail Configuration
SPRING_MAIL_HOST={{ ludus_filigran_opencti_SPRING_MAIL_HOST }}
SPRING_MAIL_PORT={{ ludus_filigran_opencti_SPRING_MAIL_PORT }}
SPRING_MAIL_USERNAME={{ ludus_filigran_opencti_SPRING_MAIL_USERNAME }}
SPRING_MAIL_PASSWORD={{ ludus_filigran_opencti_SPRING_MAIL_PASSWORD}}
SPRING_MAIL_PROPERTIES_MAIL_SMTP_AUTH={{ ludus_filigran_opencti_SPRING_MAIL_PROPERTIES_MAIL_SMTP_AUTH }}
SPRING_MAIL_PROPERTIES_MAIL_SMTP_SSL_ENABLE={{ ludus_filigran_opencti_SPRING_MAIL_PROPERTIES_MAIL_SMTP_SSL_ENABLE }}
SPRING_MAIL_PROPERTIES_MAIL_SMTP_STARTTLS_ENABLE={{ ludus_filigran_opencti_SPRING_MAIL_PROPERTIES_MAIL_SMTP_STARTTLS_ENABLE }}

# OpenBAS IMAP Configuration
OPENBAS_MAIL_IMAP_ENABLED={{ ludus_filigran_opencti_OPENBAS_MAIL_IMAP_ENABLED }}
OPENBAS_MAIL_IMAP_HOST={{ ludus_filigran_opencti_OPENBAS_MAIL_IMAP_HOST }}
OPENBAS_MAIL_IMAP_PORT={{ ludus_filigran_opencti_OPENBAS_MAIL_IMAP_PORT }}
OPENBAS_MAIL_IMAP_AUTH={{ ludus_filigran_opencti_OPENBAS_MAIL_IMAP_AUTH }}
OPENBAS_MAIL_IMAP_SSL_ENABLE={{ ludus_filigran_opencti_OPENBAS_MAIL_IMAP_SSL_ENABLE }}
OPENBAS_MAIL_IMAP_STARTTLS_ENABLE={{ ludus_filigran_opencti_OPENBAS_MAIL_IMAP_STARTTLS_ENABLE }}
